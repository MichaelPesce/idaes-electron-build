name: Test Electron Build

on:
  push:
    branches: [initial-cleanup]

jobs:
  test-electron-build:
    strategy:
        fail-fast: false
        matrix:
            # project: [watertap, prommis, idaes]
            project: [watertap]
            include: 
                - project: watertap
                  pip-install-target: "watertap@ git+https://github.com/watertap-org/watertap@main"
                  artifact-name: WaterTAP-Flowsheet-Processor
                - project: prommis
                  pip-install-target: prommis
                  artifact-name: PROMMIS-Flowsheet-Processor
                - project: idaes
                  pip-install-target: idaes-pse
                  artifact-name: IDAES-Flowsheet-Processor

    name: Test Electron Build For ${{ matrix.project }}
    uses: ./.github/workflows/electron-build.yml
    with:
        project: ${{ matrix.project }}
        pip-install-target: ${{ matrix.pip-install-target }}
        artifact-name: ${{ matrix.artifact-name }}
        idaes-flowsheet-processor-ui-repo: MichaelPesce/idaes-flowsheet-processor-ui
        idaes-flowsheet-processor-ui-ref: initial-cleanup
    secrets: inherit